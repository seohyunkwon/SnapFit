<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.snapfit.model.dao.FollowDao">
	
<<<<<<< HEAD
	<!-- 1. 특정 유저"가" 팔로우하는 모든 사람들을 조회하기(가져오기) 즉, 특정 유저의 팔로잉 리스트 조회하기(가져오기) -->
	<select id="selectAllFollowingMembers" parameterType="long" resultType="Member">
	
		SELECT *
		FROM Member
		WHERE no IN
		(SELECT following_no FROM Follow
		WHERE follower_no = #{memberNo})
	
	</select>
	
	<!-- 2. 특정 유저"를" 팔로우하는 모든 사람들을 조회하기(가져오기) 즉, 특정 유저의 팔로워 리스트 조회하기(가져오기) -->
	<select id="selectAllFollowerMembers" parameterType="long" resultType="Member">
	
		SELECT *
		FROM Member
		WHERE no IN
		(SELECT follower_no FROM Follow
		WHERE following_no = #{memberNo})
	
	</select>
	
	<!-- 3. 주어진 팔로우 관계가 DB에 존재하는지 판단하기 -->
	<!-- 입력된 팔로우 관계가 Follow table에 존재하면 해당 팔로우를 반환하고, 존재하지 않으면 null을 반환한다. -->
	<select id="checkFollow" parameterType="Follow" resultType="Follow">
	
		SELECT *
		FROM Follow
		WHERE follower_no = #{followerNo} AND following_no = #{followingNo}
	
	</select>
	
	<!-- 4. 팔로우라는 "관계"를 등록하기(삽입하기) -->
	<insert id="insertFollow" parameterType="Follow">
	
		INSERT INTO Follow
		(follower_no, following_no) VALUES
		(#{followerNo}, #{followingNo})
		
	</insert>
	
	<!-- 5. 팔로우라는 "관계"를 삭제하기 -->
	<delete id="deleteFollow" parameterType="Follow">
	
		DELETE FROM Follow
		WHERE follower_no = #{followerNo} AND following_no = #{followingNo}
		
	</delete>
	
=======
	<!-- 회원 번호에 따른 팔로워 리스트 -->
	<select id="selectFollowersByNo" resultType="Member" parameterType="long">
		SELECT * FROM member 
		WHERE no IN 
		(SELECT follower_no FROM follow 
		WHERE following_no = #{no})
	</select>
	
	<!-- 회원 번호에 따른 팔로잉 리스트 -->
	<select id="selectFollowingsByNo" resultType="Member" parameterType="long">
		SELECT * FROM member 
		WHERE no IN 
		(SELECT following_no FROM follow 
		WHERE follower_no = #{no})
	</select>
	
	<!-- 팔로우 생성 -->
	<insert id="insertFollow">
		INSERT INTO follow
		(following_no, follower_no)
		VALUES
		(#{followingNo}, #{followerNo})
	</insert>
	
	<!-- 팔로우 삭제 -->
	<delete id="deleteFollow">
		DELETE FROM follow
		WHERE following_no = #{following_no}
		AND
		follower_no = #{follower_no}
	</delete>
>>>>>>> 8e10c84053784300036ed377facd88c57e1ee5f9
</mapper>